---
title: 'Tutorial'
---

**In under 15 minutes**, you'll build an integration that allows your customers to sync their Salesforce Account records to a sample Next.js application. We'll use the same sample application from the [Quickstart](/quickstart) for the tutorial.

You'll learn how to use Supaglue's SDKs and CLI to setup and deploy the integration (frontend and backend), and customize the UI you expose to your customers.

<iframe
  className="w-full aspect-video"
  src="https://www.loom.com/embed/7f1385c598874448b171a010de325593"
></iframe>
## Before you begin

Be sure to have completed the [Quickstart](/quickstart).

## Before you begin

Be sure to have completed the [Quickstart](/quickstart).

<Info>
  For this tutorial, we've provided Salesforce Connected App credentials as part
  of the Sample App setup. Before deploying to production, please provide your
  own [Salesforce Connected App](/references/salesforce-connected-app-setup)
  credentials.
</Info>

1. Start the sample app locally if it's not already started:

```bash
cd apps/sample-app
yarn dev
```

2. Open the sample app (http://localhost:3000) and login with user: `user1` and password: `password`

## Deploy Developer Config

In Supaglue, a [Developer Config](/concepts) represents a set of Sync Configs. A [Sync Config](/concepts) defines how to move one type of Salesforce object from your customers' Salesforce to your application. Once deployed to Supaglue's Integration Service, a Sync Config can be used by your customers as a [Sync](/concepts) via embeddedable [Supaglue React components](react-components).

The Developer Config you deployed in the [Quickstart](/quickstart) currently contains Syncs for Contacts, Leads, and Opportunities. We will now add a Sync for Accounts.

### Create Sync Config for Accounts

To build a Salesforce Sync, we first use the [Config SDK](config-sdk) to create a Sync Config, which defines how to move Salesforce records between your customers' Salesforce and your application:

<Info>
  For this tutorial, we've included a sample [Developer Config](/concepts) in
  the `supaglue-config` directory, which lives in the sample app. The Config SDK
  was also installed as part of the sample app earlier for your convenience.
</Info>

1. Create `account.ts` inside the `apps/sample-app/supaglue-config/inbound` directory. Paste in the following:

```bash
apps/sample-app/supaglue-config/inbound/account.ts
```

```tsx
import * as sdk from '@supaglue/sdk';
import credentials from '../postgres_credentials';

const accountsSchema = sdk.schema({
  fields: [
    {
      name: 'salesforce_id',
      label: 'id',
    },
    {
      name: 'name',
      label: 'name',
    },
  ],
});

const defaultFieldMapping = sdk.defaultFieldMapping([
  { name: 'salesforce_id', field: 'Id' },
  { name: 'name', field: 'Name' },
]);

const accountSyncConfig = sdk.syncConfigs.inbound({
  name: 'Accounts',
  source: sdk.customer.sources.salesforce({
    objectConfig:
      sdk.customer.common.salesforce.specifiedObjectConfig('Account'),
  }),
  cronExpression: '*/15 * * * *',
  destination: sdk.internal.destinations.postgres({
    schema: accountsSchema,
    config: {
      credentials,
      table: 'salesforce_accounts',
      upsertKey: 'salesforce_id',
      customerIdColumn: 'customer_id',
    },
  }),
  strategy: 'full_refresh',
  defaultFieldMapping,
});

export default accountSyncConfig;
```

The `inbound` function creates a Sync Config that would allow customers to pull all Account records from their Salesforce instance into the sample app's Postgres database every 15 minutes.

The schema object exposes the specified Salesforce Account fields to your customers and lets them map them to fields in the sample app's Postgres database.

The defaultFieldMapping object specifies the default field mapping values for the Salesforce Account object that would be used in the sample app absent any customer-provided overrides.

2. Finally, add the newly created Sync Config for Accounts to the existing Developer Config so it can be deployed with the existing sample Sync Configs:

```bash
apps/sample-app/supaglue-config/index.ts
```

```tsx
// TUTORIAL: uncomment this
import accountInboundSyncConfig from './inbound/account';

// ...
syncConfigs: [
 contactOutboundSyncConfig,
 contactInboundSyncConfig,
 leadInboundSyncConfig,
 opportunityInboundSyncConfig,
 // TUTORIAL: uncomment this
 accountInboundSyncConfig
],
// ...
```

3. Deploy the sample Developer Config using the CLI:

```bash
supaglue apply supaglue-config/
```

You should see the following output:

```bash
...
╔══════════════════╤═══════════╤════════╗
║ Name             │ Action    │ Status ║
╟──────────────────┼───────────┼────────╢
║ Contacts         │ No Change │ Live   ║
╟──────────────────┼───────────┼────────╢
║ Leads            │ No Change │ Live   ║
╟──────────────────┼───────────┼────────╢
║ Opportunities    │ No Change │ Live   ║
╟──────────────────┼───────────┼────────╢
║ Accounts         │ Created   │ Live   ║
╚══════════════════╧═══════════╧════════╝

Syncs Created: 1, Updated: 0, Deleted: 0, No Change: 3
```

### Test the integration

Finally, let's manually trigger our sync to make sure it works as expected.

1. Navigate to the [accounts sync config](http://localhost:3000/integrations/salesforce#Accounts) tab in the sample app.
2. Click the "Sync Accounts" switch to enable accounts to be synced on a schedule.
3. Click the "Run sync now" button. This triggers Supaglue to execute a [Sync Run](/concepts) immediately as a background task.
4. Check the status of the Sync Run by running `syncs list` command to check when it completes:

```bash
supaglue syncs list --customer-id user1
```

You should see that the Accounts sync is enabled from the switch, that it was last run recently and that it's scheduled to run in the future.

```bash
ℹ Info: Syncs for customer user1
╔══════════════════╤═════════╤══════════════════════════╤══════════════════════════╗
║ Sync Name        │ Enabled │ Last Run                 │ Next Run                 ║
╟──────────────────┼─────────┼──────────────────────────┼──────────────────────────╢
║ Contacts         │ No      │ 2023-02-03T06:45:22.937Z │ n/a                      ║
╟──────────────────┼─────────┼──────────────────────────┼──────────────────────────╢
║ Opportunities    │ No      │ n/a                      │ n/a                      ║
╟──────────────────┼─────────┼──────────────────────────┼──────────────────────────╢
║ Accounts         │ Yes     │ 2023-02-03T08:08:34.344Z │ 2023-02-03T08:15:00.000Z ║
╟──────────────────┼─────────┼──────────────────────────┼──────────────────────────╢
║ Leads            │ No      │ n/a                      │ n/a                      ║
╚══════════════════╧═════════╧══════════════════════════╧══════════════════════════╝
```

5. Visit the "App Objects" tab to view the [synced Accounts records](http://localhost:3000/#Accounts), which is being populated by the Postgres table.

![](/image/tutorial.png)

## Customize integration

Supaglue lets you customize the fields and mappings you expose to your customers via React components, as well as the look-and-feel of the UI itself.

### Customize Sync Config

You may have realized that two of the columns in the sample app's Contacts table are missing. Let's add two fields, last name and title, to be synced. These will be available for customers to map.

1. Update the schema object to include the two missing fields:

```bash
apps/sample-app/supaglue-config/inbound/contact.ts
```

```tsx
const contactSchema = sdk.schema({
  fields: [
    // ...
    // TUTORIAL: Uncomment this
    {
      name: 'last_name',
      label: 'last name',
    },
    {
      name: 'title',
      label: 'title',
    },
  ],
});
```

2. Re-run the `apply` CLI command to apply the latest changes:

3. On the [Salesforce Integration page](http://localhost:3000/integrations/salesforce#Contacts) you should now see two newly configured fields:

![](/image/tutorial-2.png)

Click "Run sync now". Once the background sync completes, verify the newly synced fields now contain values on the ["App Objects" page](http://localhost:3000/#Contacts).

![](/image/tutorial-3.png)

## Next Steps

Congrats! You've successfully shipped your first Salesforce integration using Supaglue, complete with customizations. Learn more about how Supaglue works in the Concepts section.
